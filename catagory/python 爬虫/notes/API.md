
# introduction (简介）

这正是应用编程接口(Application Programming Interface，API)的用处:它们为不同的应 用提供了方便友好的接口。不同的开发者用不同的架构，甚至不同的语言编写软件都没问 题——因为 API 设计的目的就是要成为一种通用语言，让不同的软件进行信息共享。

尽管目前不同的软件应用都有各自不同的 API，但“API”经常被看成“网络应用 API”。
一般情况下，程序员可以用 HTTP 协议向 API 发起请求以获取某种信息，API 会用 XML (eXtensible Markup Language， 可 扩 展 标 记 语 言 ) 或 JSON(JavaScript Object Notation， JavaScript 对象表示)格式返回服务器响应的信息。尽管大多数 API 仍然在用 XML，但是JSON 正在快速成为数据编码格式的主流选择。

用这种即开即用的接口获取预先打包好的信息，看起来好像和本书主题没什么关系，但是 这种看法只对了一半。虽然大多数人通常不会把使用 API 看成网络数据采集，但是实际上 两者使用的许多技术(都是发送 HTTP 请求)和产生的结果(都是获取信息)差不太多; 两者经常是相辅相成的关系。

例如，你可能会把网络爬虫和 API 获取的信息组合起来，因为这样的信息可能更有意义。 在本章后面的一个例子中，我们将会介绍如何把维基百科编辑历史(里面有编辑者 IP 地 址)和一个 IP 地址解析的 API 组合起来，以获取维基百科词条编辑者的地理位置。

在这一章里，我们将首先概述 API，之后介绍 API 的工作原理，以及几个目前比较流行的 API，最后介绍如何在网络爬虫里使用这些 API。

# 4.1 API概述

虽然 API 并非随处可见(这正是我写这本书的主要动机，因为即使你找不到 API，也可 以用爬虫采集信息)，但是你可以从 API 里获取许多信息。如果你对音乐感兴趣，有几个 API 可以为你提供歌曲名称、歌手、专辑，以及歌曲风格和相关歌手的信息。想要体育 信息? ESPN 提供的 API 包括运动员信息、比赛分数等。Google 的开发者社区(https:// console.developers.google.com/)也提供了一堆 API 用于获取语言翻译、分析、地理位置等 信息。

API 很容易使用。其实你只要在浏览器里输入下面的网址就可以发起一个简单的 API 请求:1

    http://freegeoip.net/json/50.78.253.58
  
      应该会出现下面的结果:
   
       {"ip":"50.78.253.58","country_code":"US","country_name":"美国","region_ code":"MA","region_name":"Massachusetts","city":"Chelmsford","zipcode":"01824", "latitude":42.5879,"longitude":-71.3498,"metro_code":"506","area_code":"978"}
       
你可能会想，这不就是在浏览器窗口输入一个网址，按回车后获取的(只是 JSON 格式) 信息吗?究竟 API 和普通的网址访问有什么区别呢?如果不考虑 API 高大上的名称，其实 两者没啥区别。API 可以通过 HTTP 协议下载文件，和 URL 访问网站获取数据的协议一 样，它几乎可以实现所有在网上干的事情。API 之所以叫 API 而不是叫网站的原因，其实 是首先 API 请求使用非常严谨的语法，其次 API 用 JSON 或 XML 格式表示数据，而不是 HTML 格式。

